
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% XeTeX
%
% Dicionário Chinês -> Português
% Autor: Luiz Eduardo Roncato Cordeiro
%
% Licença:
% CC BY-NC-SA 3.0 (http://creativecommons.org/licenses/by-nc-sa/3.0/)
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[a4paper,10pt,twoside,openany]{memoir}

\usepackage[dvipsnames]{xcolor}
\usepackage[brazil]{babel}
\usepackage{xeCJK}
\usepackage{xeCJKfntef}
\usepackage{xpinyin}
\usepackage{multicol}
\usepackage{imakeidx}
\usepackage{xparse}
\usepackage[inline]{enumitem}
\usepackage{zhnumber}
\usepackage{tikz}
\usepackage[hyperindex,hidelinks]{hyperref}
\usepackage{pifont}
\usepackage{xstring}
\usepackage{tabularray}

% Meus Comandos
\input{comandos.tex}

% Ajuste das fontes... No Tofu do Google
\setCJKmainfont{Noto Serif CJK SC ExtraLight}
\setCJKsansfont{Noto Sans CJK SC}
\setCJKmonofont{Noto Sans Mono CJK SC}

% Ajustes do PDF
\hypersetup{
  linktoc=page,
  colorlinks=true,
  urlcolor=blue,
  linkcolor=blue,
  citecolor=blue,
  pdftitle={汉葡词典 - Dicionário Chinês-Português},
  pdfsubject={Dicionário Chinês-Português -- Curso de Chinês do Instituto Confúcio},
  pdfauthor={Luiz Eduardo Roncato Cordeiro, AKA 罗学凯},
  pdfkeywords={dicionário, chinês, português, instituto confúcio}
}

% Sumário
\makeatletter
\renewcommand{\@pnumwidth}{2em} 
\renewcommand{\@tocrmarg}{4em}
\makeatother
\renewcommand\cftbeforechapterskip{5pt plus 1pt}

% Índices Remissivos
\makeindex[title=Índice Remissivo por Pinyin,intoc=true,columns=3,columnsep=15pt,columnseprule=true,noautomatic=true,name=pinyin]
\makeindex[title=Índice Remissivo por Traço,intoc=true,columns=3,columnsep=15pt,columnseprule=true,noautomatic=true,name=stroke]
\makeindex[title=Índice Remissivo por Radical,intoc=true,columns=3,columnsep=15pt,columnseprule=true,noautomatic=true,name=radical]
\indexsetup{level=\chapter*,toclevel=chapter,headers={\indexname}{\indexname}}
\indexprologue{Para diferenciação, os nomes próprios estão em cor diferente.}

% Ajustes de espaçamento
\setlength{\parindent}{0cm}
\setlength{\parskip}{-1.5mm}
\setlength{\columnsep}{.5em}
\setlength{\columnseprule}{0.2mm}

% Ajustes do gerador de pinyin
\xpinyinsetup{ratio={.6},vsep={1em},pysep={\hspace{.2ex}}}

% Headers & Footers
\setheadfoot{14pt}{28pt}
\makeevenfoot{plain}{\thepage}{汉葡词典}{}
\makeoddfoot{plain}{}{汉葡词典}{\thepage}
\makefootrule{plain}{\textwidth}{\normalrulethickness}{4pt}
\makepagestyle{dicionario}
\makeevenhead{dicionario}{\rightmark}{}{\leftmark}
\makeoddhead{dicionario}{\rightmark}{}{\leftmark}
\makeevenfoot{dicionario}{\thepage}{汉葡词典}{}
\makeoddfoot{dicionario}{}{汉葡词典}{\thepage}
\makeheadrule{dicionario}{\textwidth}{\normalrulethickness}
\makefootrule{dicionario}{\textwidth}{\normalrulethickness}{4pt}

% Seções têm uma caixa arredondada em volta do nome, para o A-Z dos pinyin.
\newcommand{\boxedsec}[1]{%
  \tikz{
    \node[draw,rounded corners=1mm,text depth=0.2ex,line width=1pt, anchor=west]{\Large\bfseries#1};
  }
}
\setsecheadstyle{\boxedsec}
\setbeforesecskip{2ex}
\setaftersecskip{1.5ex}

% Até agora o melhor estilo para capítulos
\chapterstyle{verville}


%%%
%%% Documento começa aqui!
%%%

\begin{document}

\input{capa.tex}

\clearpage
\pagestyle{empty}
\tableofcontents

\clearpage
\pagestyle{empty}
\chapter{汉葡词典}

%%%%%%%%%%%%%%%%%%%%%%%%
%
% Estou ordenando as palavras em ordem alfabética por pinyin, 
% depois por número de traços e, finalmente, por UTF-8 do hanzi.
%
% https://en.wikipedia.org/wiki/Chinese_character_orders
%
%%%%%%%%%%%%%%%%%%%%%%%%

\clearpage
\pagestyle{dicionario}
\begin{multicols}{2}
\input{grupos/A.tex}
\input{grupos/B.tex}
\input{grupos/C.tex}
\input{grupos/D.tex}
\input{grupos/E.tex}
\input{grupos/F.tex}
\input{grupos/G.tex}
\input{grupos/H.tex}
%%%%%%%%%%%%%%%%%%%% Não existem palavras com pinyin iniciado em "I"
\input{grupos/J.tex}
\input{grupos/K.tex}
\input{grupos/L.tex}
\input{grupos/M.tex}
\input{grupos/N.tex}
\input{grupos/O.tex}
\input{grupos/P.tex}
\input{grupos/Q.tex}
\input{grupos/R.tex}
\input{grupos/S.tex}
\input{grupos/T.tex}
%%%%%%%%%%%%%%%%%%%% Não existem palavras com pinyin iniciado em "U"
%%%%%%%%%%%%%%%%%%%% Não existem palavras com pinyin iniciado em "V"
\input{grupos/W.tex}
\input{grupos/X.tex}
\input{grupos/Y.tex}
\input{grupos/Z.tex}
\end{multicols}

\clearpage
\pagestyle{plain}
\chapter{Termos Gramaticais Chineses}
\input{termos.tex}

\clearpage
\pagestyle{plain}
\chapter{Radicais Chineses}
\input{radicais.tex}

\printindex[stroke]
\printindex[radical]
\printindex[pinyin]

\end{document}

%%%%% EOF %%%%
